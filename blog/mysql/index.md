索引相关
====

InnoDB和MyISAM的区别
---

* MyISAM是非事务安全的，而InnoDB是事务安全的
* MyISAM锁的粒度是表级锁，而InnoDB是行级锁
* MyISAM支持Fulltext全文类型索引，而InnoDB不支持
* MyISAM相对简单，效率上要优于InnoDB，小型数据库可以考虑使用MyISAM
* MyISAM表保存成文件，跨平台使用更方便

索引失效
---

* 列与列对比，当一个表两个列分别都创建了索引，将他们进行对比，不会走索引
* where 条件与null判定不会走索引
* 否定条件！=、not、not exists不会走索引
* 前置通配符“%三” 不会用到索引
* where条件用到函数以及谓词运算（+-×/）
* 
* where 条件类型不一致
* 组合索引单独使用只有第一个字段会用到索引
* or 条件只有两个列都有索引才会用到索引
* 连接查询关联关键词编码格式不一致
* 全表扫描快于使用索引（表数据量少）

聚集索引与非聚集索引
---

## 聚集索引

数据行的物理顺序与列值（一般是主键的那一列）的逻辑顺序相同，一个表只能有一个聚集索引，即primary key

## 非聚集索引

该索引中索引的逻辑顺序与吃攀上的物理存储顺序不同，一个表可以拥有多个非聚集索引

事务
---

事务是一个操作序列，要么都执行，要么都不执行

## ACID

在可靠数据库管理系统中，事务具有的四个特性：原子性（Atomicity），一致性（Consistency），隔离性（Isolation），持久性（Durability）

### 原子性

要么都执行，要么都不执行

### 一致性

事务开始之后前和结束之后，数据库的完整性约束没有被破坏

### 隔离性

多个事务并发访问，数据库之间不会相互影响（下为隔离级别）

* 脏读 一个事务读取了另一个事务未提交的数据，这个数据有可能会被回滚
* 不可重复读 一个事务范围内两个相同的查询却返回了不同的数据
* 幻读 一个事务操作过程中另一个事务添加了新的数据，但是第一个事务本应该修改到第二个事务的数据而没有修改到
* 更新丢失 两个事务同时修改一个数据，后者修改将前者修改覆盖

### 持久行

事务完成后数据更改为持久保存，不会再回滚